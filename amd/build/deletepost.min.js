define ("format_timeline/deletepost",["jquery","core/ajax","core/str","format_timeline/sweetalert"],function(a,b,c,d){var e={CONFIRM_TITLE:"Are you sure?",CONFIRM_MSG:"Once deleted, the post cannot be recovered!",CONFIRM_YES:"Yes, delete it!",CONFIRM_NO:"Cancel",SUCCESS:"Post successfully deleted."},f=[{key:"deletepost_confirm_title",component:"format_timeline"},{key:"deletepost_confirm_msg",component:"format_timeline"},{key:"deletepost_confirm_yes",component:"format_timeline"},{key:"deletepost_confirm_no",component:"format_timeline"},{key:"deletepost_success",component:"format_timeline"}],g=function(){this.getStrings();this.registerEventListeners()};g.prototype.getStrings=function(){var b=c.get_strings(f);a.when(b).done(function(a){e.CONFIRM_TITLE=a[0];e.CONFIRM_MSG=a[1];e.CONFIRM_YES=a[2];e.CONFIRM_NO=a[3];e.SUCCESS=a[4]})};g.prototype.registerEventListeners=function(){a(".delete-post").click(function(b){b.preventDefault();var c=a(b.currentTarget);d.fire({title:e.CONFIRM_TITLE,text:e.CONFIRM_MSG,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:e.CONFIRM_YES,cancelButtonText:e.CONFIRM_NO}).then(function(a){if(a.value){this.deletePost(c)}}.bind(this))}.bind(this))};g.prototype.deletePost=function(a){var c=b.call([{methodname:"format_timeline_deletepost",args:{post:{id:a.data("id")}}}]);c[0].done(function(){this.removeDiscuss(a)}.bind(this)).fail(function(a){var b=a.message;if(!b){b=a.error}this.showToast("error",b)})};g.prototype.removeDiscuss=function(b){var c=b.closest("div.discuss");c.fadeOut("normal",function(){a(this).remove()});this.showToast("success",e.SUCCESS)};g.prototype.showToast=function(a,b){var c=d.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:8e3,timerProgressBar:!0,onOpen:function onOpen(a){a.addEventListener("mouseenter",d.stopTimer);a.addEventListener("mouseleave",d.resumeTimer)}});c.fire({icon:a,title:b})};return{init:function init(){return new g}}});
//# sourceMappingURL=deletepost.min.js.map
